#!/usr/bin/env bash

#SamuraiSight launch script

cd "$(dirname "${BASH_SOURCE[0]}")" # Sets working directory to the bin/ directory
cd .. # Sets working directory to the project root

IFACE=eth0 #Network interface

set -a
source .env
set +a

if [ "$USE_STATIC_IP" == "true" ]; then
    sudo ip addr flush dev $IFACE
    sudo ip addr add $STATIC_IP/24 dev $IFACE
    sudo ip route add default via $GATEWAY dev $IFACE
fi

source .venv/bin/activate # Activates python venv
cd src
python3 main.py # Launches python program


