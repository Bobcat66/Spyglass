#!/usr/bin/env bash

#SamuraiSight launch script

cd "$(dirname "${BASH_SOURCE[0]}")" # Sets working directory to the bin/ directory
cd .. # Sets working directory to the project root

IFACE=eth0 #Network interface

set -a
source .env
set +a

if [ "$USE_STATIC_IP" == "true" ]; then
    ip addr flush dev $IFACE
    ip addr add $STATIC_IP/24 dev $IFACE
    ip route add default via $GATEWAY dev $IFACE
fi

# Drops root privileges after configuring network settings
sudo -u $USER source .venv/bin/activate # Activates python venv
sudo -u $USER cd src
sudo -u $USER python3 main.py # Launches python program


